(this["webpackJsonpepic-auto-claim-front"]=this["webpackJsonpepic-auto-claim-front"]||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/epic-auto-claim.6a8ee48e.png"},52:function(e,t,a){},60:function(e,t,a){e.exports=a(93)},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),o=a(9),i=a(0),l=a.n(i),c=a(32),s=a.n(c),u=a(15),m=Object(u.a)(),d=a(11),p=a(95),f=function(e){return{userPresent:e.user.userPresent}},h=function(e){return Object(p.e)(Object(d.b)(f)((function(t){var a,n=t.userPresent,r=t.location;return(null===r||void 0===r||null===(a=r.state)||void 0===a?void 0:a.email)?l.a.createElement(e,null):n?l.a.createElement(p.a,{to:"/profile"}):l.a.createElement(p.a,{to:"/"})})))},v=function(e){return Object(p.e)(Object(d.b)(f)((function(t){return t.userPresent?l.a.createElement(e,null):l.a.createElement(p.a,{to:"/"})})))},E=a(16),b=a.n(E),g="37D033EB-6489-3763-2AE1-A228C04103F5",y=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("http://localhost:3001/api/session",{withCredentials:!0});case 2:return t=e.sent,a=t.data.session.userPresent,n={},a&&(o=t.data.session,i=o.email,l=o.userPresent,n={user:{userPresent:l,email:i}}),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=a(10),N=a(34),w=a.n(N),O={login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n={method:"POST",url:"http://localhost:3001/api/login",data:{email:e,password:t,captcha:a}};return b()(n).then(j).catch(C)},loginMfa:function(e,t,a){var n={method:"POST",url:"http://localhost:3001/api/login/mfa",data:{email:e,code:t,method:a}};return b()(n).then(j).catch(C)},getProfile:function(e){var t={method:"POST",url:"http://localhost:3001/api/profile",data:{email:e}};return b()(t).then(B).catch(C)}};function j(e){return e}function B(e){return e.data}function C(e){throw e}var x={getFreeGames:function(e){var t={method:"POST",url:"http://localhost:3001/api/freegames",data:{email:e}};return b()(t).then(P).catch(S)},purhcase:function(e){var t={method:"POST",url:"http://localhost:3001/api/purchase",data:{email:e}};return b()(t).then(I).catch(S)}};function I(e){return{status:e.status,statusText:e.statusText}}function P(e){return e.data}function S(e){throw e}var T=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"LOGIN",email:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=a(36),A=k.a().shape({email:k.b().required(),password:k.b().required()}),F=a(18),D=a(57),L=(a(52),Object(d.b)(null,{userDispatch:T})((function(e){var t,a,n=Object(i.useState)(!1),r=Object(M.a)(n,2),o=r[0],c=r[1],s=Object(F.c)({resolver:Object(D.a)(A),mode:"all"}),u=s.handleSubmit,d=s.register,p=s.errors,f=s.getValues,h=function(e){var t;return"required"===(null===p||void 0===p||null===(t=p[e])||void 0===t?void 0:t.type)?"MuiInputBase-root MuiInput-root MuiInputBase-adornedEnd Mui-error":"MuiInputBase-root MuiInput-root MuiInputBase-adornedEnd"};return l.a.createElement("div",{className:"modalbase-container"},l.a.createElement("div",{className:"modalbase-content"},l.a.createElement("div",{className:"modalbase-card"},l.a.createElement("div",{className:"optional-top-spacer"}),l.a.createElement("div",{className:"modalbase-card-content"},l.a.createElement("div",{className:"layout-vertical"},l.a.createElement("div",{className:"epiclogo-layout"},l.a.createElement("img",{src:w.a,alt:"Logo",className:"EpicLogo",style:{width:130,height:50}})),l.a.createElement("h6",{className:"MuiTypography-root Subheading upper MuiTypography-subtitle1"},"Sign in with an Epic Games Account"),l.a.createElement("form",{className:"form-vertical"},l.a.createElement("div",{className:"MuiFormControl-root form-field MuiFormControl-fullWidth"},l.a.createElement("div",{className:h("email")},l.a.createElement("input",{autoComplete:"email",id:"email",name:"email",placeholder:"Email Address",type:"text",inputMode:"text","aria-label":"email",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",className:"MuiInputBase-input MuiInput-input MuiInputBase-inputAdornedEnd","aria-invalid":"true",ref:d}),"required"===(null===p||void 0===p||null===(t=p.email)||void 0===t?void 0:t.type)?l.a.createElement("div",{className:"MuiInputAdornment-root upper validation-adornment MuiInputAdornment-filled MuiInputAdornment-positionEnd"},"Required"):null)),l.a.createElement("div",{className:"MuiFormControl-root form-field MuiFormControl-fullWidth"},l.a.createElement("div",{className:h("password")},l.a.createElement("input",{autoComplete:"current-password",id:"password",name:"password",placeholder:"Password",type:"password",inputMode:"text","aria-label":"password",className:"MuiInputBase-input MuiInput-input MuiInputBase-inputAdornedEnd",ref:d}),"required"===(null===p||void 0===p||null===(a=p.password)||void 0===a?void 0:a.type)?l.a.createElement("div",{className:"MuiInputAdornment-root upper validation-adornment MuiInputAdornment-filled MuiInputAdornment-positionEnd"},"Required"):null)),l.a.createElement("div",{className:"controls-vertical"},l.a.createElement("button",{className:function(){var e=f(["email","password"]);return e.email&&e.password&&!o?"MuiButtonBase-root MuiButton-root MuiButton-contained SubmitButton MuiButton-containedPrimary MuiButton-fullWidth":"MuiButtonBase-root MuiButton-root MuiButton-contained SubmitButton MuiButton-containedPrimary MuiButton-fullWidth Mui-disabled"}(),type:"submit","aria-label":"sign-in",onClick:u((function(t){var a=t.email,n=t.password;c(!0),O.login(a,n).then((function(t){var n=t.statusText;c(!1),"OK"===n&&(e.userDispatch(a),m.push("/profile",{email:a}))})).catch((function(e){if(c(!1),e.response&&e.response.data&&e.response.data.errorCode)if(e.response.data.errorCode.includes("session_invalidated"));else if("errors.com.epicgames.accountportal.captcha_invalid"===e.response.data.errorCode)m.push("/captcha",{email:a,password:n});else if("errors.com.epicgames.common.two_factor_authentication.required"===e.response.data.errorCode){console.log("TWO FACTOR YOU FUCKER.");var t=e.response.data.metadata.twoFactorMethod;m.push("/twofactor",{email:a,password:n,method:t})}}))}))},o?null:l.a.createElement("span",{className:"MuiButton-label"},"Log in now"),o?l.a.createElement("i",{style:{fontSize:20},className:"fa fa-circle-o-notch fa-spin"}):null))))),l.a.createElement("div",{className:"optional-bottom-spacer"}))))}))),W=a(20),G=a(21),_=a(23),q=a(22),z=a(96),K=(a(87),function(e){Object(_.a)(a,e);var t=Object(q.a)(a);function a(){return Object(W.a)(this,a),t.apply(this,arguments)}return Object(G.a)(a,[{key:"render",value:function(){return l.a.createElement(z.a,{fluid:!0,style:{padding:0,height:"100%"},className:"d-flex justify-content-center"},l.a.createElement("span",{className:"loader"},l.a.createElement("span",{className:"loader-inner"})))}}]),a}(l.a.Component)),R=a(97),H=function(e){Object(_.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e}return Object(G.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.scriptLoaded()}),1e3)}},{key:"scriptLoaded",value:function(){var e=this;if(this.setState({loading:!0}),this.props.location.state)var t=this.props.location.state,a=t.email,n=t.password;new window.FunCaptcha({public_key:g,target_html:"CAPTCHA",callback:function(t){O.login(a,n,t).then((function(t){"OK"===t.statusText&&(e.props.userDispatch(a),m.push("/profile",{email:a}))})).catch((function(e){if("errors.com.epicgames.common.two_factor_authentication.required"===e.response.data.errorCode){var t=e.response.data.metadata.twoFactorMethod;m.push("/twofactor",{email:a,password:n,method:t})}else window.location.path="/"}))}})}},{key:"render",value:function(){var e=this.state.loading;return l.a.createElement(z.a,{style:{padding:0,height:"100%"}},e?l.a.createElement("span",{style:{padding:0,height:"100%"},className:"d-flex justify-content-center"},l.a.createElement(R.a,{className:"align-items-center align-middle"},l.a.createElement("div",{id:"CAPTCHA"}))):l.a.createElement(K,null))}}]),a}(l.a.Component),J=Object(p.e)(Object(d.b)(null,{userDispatch:T})(H)),U=a(98),V=a(99),Y=a(100),$=a(101),Q=a(103),X=a(104),Z=a(105),ee=a(102),te=(a(88),function(e){Object(_.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={freeGames:null,user:null},e}return Object(G.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.email;x.getFreeGames(t).then((function(a){e.setState({freeGames:a}),O.getProfile(t).then((function(t){console.log(t),e.setState({user:t})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),x.purhcase(t).then((function(a){"OK"===a.statusText&&(console.log("OK"),x.getFreeGames(t).then((function(t){e.setState({freeGames:t})})).catch((function(e){console.log(e)})))})).catch((function(e){console.log(e)}))}},{key:"renderCard",value:function(e){return e.map((function(e,t){var a,n=new Date(e.endDate),r=new Intl.DateTimeFormat("th",{month:"short"}).format(n),o=new Intl.DateTimeFormat("th",{day:"2-digit"}).format(n),i=new Intl.DateTimeFormat("th",{hour:"numeric",minute:"numeric"}).format(n);return l.a.createElement(U.a,{sm:3,className:"d-flex align-items-center align-middle justify-content-center",style:{paddingBottom:15},key:t},l.a.createElement(V.a,null,l.a.createElement(Y.a,{top:!0,src:null===e||void 0===e||null===(a=e.keyImages.filter((function(e){return"Thumbnail"===e.type}))[0])||void 0===a?void 0:a.url,alt:null===e||void 0===e?void 0:e.productName}),e.purchasable?null:l.a.createElement($.a,{className:"d-flex align-items-center justify-content-center"},l.a.createElement("span",{style:{marginBottom:70}},l.a.createElement("span",{className:"d-flex justify-content-center"},l.a.createElement(ee.a,{size:"80px",color:"#4fdf6f"})),l.a.createElement("br",null),l.a.createElement(Q.a,{style:{fontSize:"18px",opacity:1,color:"#fff"}},"ALREADY CLAIM"))),l.a.createElement(X.a,null,l.a.createElement(Z.a,null,null===e||void 0===e?void 0:e.productName),l.a.createElement(Q.a,null,"\u0e1f\u0e23\u0e35\u0e41\u0e25\u0e49\u0e27\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 - ","".concat(r," ").concat(o," \u0e40\u0e27\u0e25\u0e32 ").concat(i)))))}))}},{key:"render",value:function(){var e,t,a=this.state,n=a.freeGames,r=a.user,o=this.props.userPresent;return l.a.createElement(l.a.Fragment,null,n&&r&&o?l.a.createElement(z.a,{fluid:!0,style:{padding:0,height:"100%"}},l.a.createElement("div",{className:"content"},l.a.createElement(R.a,{className:"justify-content-center",style:{margin:"20px"}},l.a.createElement("div",{className:"greet-text"},"  ","Hello ",null===r||void 0===r||null===(e=r.userInfo)||void 0===e||null===(t=e.displayName)||void 0===t?void 0:t.value,"! ","  ")),l.a.createElement("div",{className:"d-flex align-items-center align-middle"},l.a.createElement(R.a,{className:"justify-content-center"},n?this.renderCard(n):null)))):l.a.createElement(K,null))}}]),a}(l.a.Component)),ae=Object(p.e)(Object(d.b)((function(e){var t=e.user;return{email:t.email,userPresent:t.userPresent}}))(te)),ne=a(58),re=(a(89),Object(p.e)(Object(d.b)(null,{userDispatch:T})((function(e){var t=Object(i.useState)(!1),a=Object(M.a)(t,2),n=a[0],r=a[1],o=Object(i.useState)(null),c=Object(M.a)(o,2),s=c[0],u=c[1];return l.a.createElement("div",{className:"modalbase-container"},l.a.createElement("div",{className:"modalbase-content"},l.a.createElement("div",{className:"modalbase-card"},l.a.createElement("div",{className:"optional-top-spacer"}),l.a.createElement("div",{className:"modalbase-card-content"},l.a.createElement("div",{className:"layout-vertical"},l.a.createElement("div",{className:"epiclogo-layout"},l.a.createElement("img",{src:w.a,alt:"Logo",className:"EpicLogo",style:{width:130,height:50}})),l.a.createElement("h6",{className:"d-flex justify-content-center MuiTypography-root Subheading upper center MuiTypography-subtitle1"},"Enter the security code to continue"),l.a.createElement("form",{className:"form-vertical",onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"MuiFormControl-root form-field masked-code MuiFormControl-fullWidth",style:{backgroundColor:"inherit"}},l.a.createElement("div",{className:"custom-styles"},l.a.createElement(ne.a,{id:"input-verification-code",placeholder:"",onChange:function(e){u(e);for(var t=document.getElementsByClassName("ReactInputVerificationCode__item"),a=0;a<t.length;a++){if(t[a].innerHTML)t[a].classList.contains("haveInput")||t[a].classList.add("haveInput");else t[a].classList.remove("haveInput")}},length:6}))),l.a.createElement("div",{className:"controls-horizontal",style:{marginTop:"30px"}},l.a.createElement("button",{className:"MuiButtonBase-root MuiButton-root MuiButton-contained CancelButton MuiButton-containedSecondary MuiButton-fullWidth",type:"button",id:"cancel"},l.a.createElement("span",{className:"MuiButton-label"},"Cancel")),l.a.createElement("div",{className:"Spacer",style:{width:"100%",height:"0px",maxWidth:"25px",maxHeight:"0px"}}),l.a.createElement("button",{className:s&&s.length>=6&&!n?"MuiButtonBase-root MuiButton-root MuiButton-contained SubmitButton MuiButton-containedPrimary MuiButton-fullWidth":"MuiButtonBase-root MuiButton-root MuiButton-contained SubmitButton MuiButton-containedPrimary MuiButton-fullWidth Mui-disabled",type:"submit",id:"continue",onClick:function(){if(e.location.state)var t=e.location.state,a=t.email,n=t.method;r(!0),O.loginMfa(a,s,n).then((function(t){var n=t.statusText;r(!1),"OK"===n&&(e.userDispatch(a),m.push("/profile",{email:a}))})).catch((function(e){r(!1),m.push("/")}))}},n?null:l.a.createElement("span",{className:"MuiButton-label"},"Continue"),n?l.a.createElement("i",{style:{fontSize:20},className:"fa fa-circle-o-notch fa-spin"}):null))))),l.a.createElement("div",{className:"optional-bottom-spacer"}))))})))),oe=(a(90),function(e){Object(_.a)(a,e);var t=Object(q.a)(a);function a(){return Object(W.a)(this,a),t.apply(this,arguments)}return Object(G.a)(a,[{key:"render",value:function(){return l.a.createElement(z.a,{fluid:!0,style:{height:"100%"},className:"wrapper d-flex align-items-center align-middle"},l.a.createElement(U.a,null,l.a.createElement(R.a,null,l.a.createElement("div",{className:"head"},l.a.createElement("div",{className:"meta"}),l.a.createElement("div",{className:"meta"}))),l.a.createElement("span",{style:{width:"100%",height:"100%"},className:"d-flex justify-content-center"},l.a.createElement("div",{className:"body"}))))}}]),a}(l.a.Component)),ie=a(24),le=a(59),ce={userPresent:!1},se=Object(ie.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{userPresent:!0,email:t.email};default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(91),a(92);var ue=function(e){var t,a,n=(t=e,Object(ie.d)(se,t,Object(ie.a)(le.a)));s.a.render(l.a.createElement(d.a,{store:n},l.a.createElement(p.c,{history:m},l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/",component:(a=L,Object(p.e)(Object(d.b)(f)((function(e){return e.userPresent?l.a.createElement(p.a,{to:"/profile"}):l.a.createElement(a,null)}))))}),l.a.createElement(p.b,{path:"/captcha",component:h(J)}),l.a.createElement(p.b,{path:"/twofactor",component:h(re)}),l.a.createElement(p.b,{path:"/profile",component:v(ae)}),l.a.createElement(p.b,{path:"/404",component:oe}),l.a.createElement(p.a,{from:"*",to:"/404"})))),document.getElementById("root"))};Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ue,e.next=3,y();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.370cbe56.chunk.js.map